I"<p>æ–‡ä»¶ã€Œæ–‡æœ¬ã€æ–‡æ¡£ã€å›¾ç‰‡ç­‰ç­‰ã€æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ä¸å¯ç¼ºå°‘çš„éƒ¨åˆ†ï¼Œåœ¨ <a href="https://mp.weixin.qq.com/s/kR6oiyYGDdhhpD9HGMy7ZA">ä½¿ç”¨ Flask åˆ›å»º RESTful æœåŠ¡</a> ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Flask åˆ›å»ºä¸€ä¸ªæ”¯æŒ RESTful API çš„æœåŠ¡å™¨ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•ä½¿ç”¨ RESTful API æ¥å®Œæˆæ–‡ä»¶çš„æ¥æ”¶ï¼Œå¹¶å°†æ–‡ä»¶ä¿å­˜åœ¨é™æ€ç›®å½•ä¸‹ã€‚</p>

<p>ä»¥ä¸‹æ˜¯æ–‡ä»¶æ¥æ”¶çš„ä»£ç ã€Œè¿™æ˜¯å®ç°çš„æ˜¯å›¾ç‰‡çš„æ¥æ”¶ã€ï¼š</p>
<pre><code class="language-python">    parse = reqparse.RequestParser()
    parse.add_argument('image', type=werkzeug.datastructures.FileStorage, location='files')
    args = parse.parse_args()
    stream = args.get('image')
    basepath = current_app.config['BASEDIR']
    upload_path = os.path.join(basepath, "server/static/uploads", secure_filename(stream.filename))
    stream.save(upload_path)
</code></pre>

<blockquote>
  <p>The FileStorage class is a thin wrapper over incoming files. It is used by the request object to represent uploaded files. All the attributes of the wrapper stream are proxied by the file storage so itâ€™s possible to do storage.read() instead of the long form storage.stream.read().</p>
</blockquote>

<p>ä»¥ä¸Šä»£ç å®ç°é€šè¿‡å‚æ•°ä¼ è¾“å›¾ç‰‡ä¸Šä¼ è‡³æœåŠ¡ç«¯ï¼Œåœ¨æœåŠ¡ç«¯ä»¥æ–‡ä»¶æµçš„æ–¹å¼è¯»å–æ–‡ä»¶å¹¶å°†æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨çš„é™æ€æ–‡ä»¶ç›®å½•ä¸‹ã€‚</p>

<p>ä»¥ä¸‹æ˜¯é€šè¿‡ Postman æµ‹è¯•æ–‡ä»¶ä¸Šä¼  API çš„é…ç½®æ–¹å¼ã€‚
<img src="https://lg-8wz4hass-1252833766.cos.ap-shanghai.myqcloud.com/pic/æˆªå±2019-12-1ä¸‹åˆ9.33.04.png" alt="" /></p>

<p>åœ¨ Anddroid ä¸‹å¯ä»¥æ˜¯ Retrofit æ¥å®Œæˆæ–‡ä»¶çš„ä¸Šä¼ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">public class Server {
    private static final String TAG = "Server";

    public interface UserAPIs {
        @Multipart
        @POST("/image")
        Call&lt;ResponseBody&gt; uploadImage(@Part MultipartBody.Part file,
                                       @Part("name") RequestBody requestBody);
    }

    public static void uploadImageToServer(Context context, String filePath, Callback callback) {
        Retrofit retrofit = NetworkClinet.getRetrofitClinet(context);
        UserAPIs uploadAPIs = retrofit.create(UserAPIs.class);
        //Create a file object using file path
        File file = new File(filePath);
        // Create a request body with file and image media type
        RequestBody fileReqBody = RequestBody.create(file, MediaType.parse("image/*"));
        // Create MultipartBody.Part using file request-body,file name and part name
        MultipartBody.Part part = MultipartBody.Part.createFormData("image", file.getName(), fileReqBody);
        //Create request body with text description and text media type
        RequestBody description = RequestBody.create("image-type", MediaType.parse("text/plain"));

        Call call = uploadAPIs.uploadImage(part, description);
        call.enqueue(callback);
    }
}

final class NetworkClinet {
    private static final String BASE_URL = "http://127.0.0.1:5000/";
    private static Retrofit retrofit;

    public static Retrofit getRetrofitClinet(Context context) {
        if (retrofit == null) {
            OkHttpClient okHttpClient = new OkHttpClient.Builder()
                    .connectTimeout(30, TimeUnit.SECONDS)
                    .writeTimeout(30, TimeUnit.SECONDS)
                    .readTimeout(30, TimeUnit.SECONDS)
                    .build();
            retrofit = new Retrofit.Builder()
                    .baseUrl(BASE_URL)
                    .client(okHttpClient)
                    .addConverterFactory(GsonConverterFactory.create())
                    .build();
        }
        return retrofit;
    }
}
</code></pre>
:ET